<?xml version="1.0"?>
<ruleset name="VIISON">
    <!-- See https://github.com/squizlabs/PHP_CodeSniffer/wiki/Annotated-ruleset.xml for more information -->
    <description>The VIISON PHP coding standard builds on the PSR-2 and Squiz coding standards.</description>

    <!-- Enable colored output -->
    <arg name="colors" />

    <config name="ignore_warnings_on_exit" value="true" />

    <!-- Exclude all static dependencies -->
    <exclude-pattern>*/vendor/*</exclude-pattern>
    <exclude-pattern>*/node_modules/*</exclude-pattern>

    <!-- Exclude some non-PHP files to surpress confusing warnings -->
    <exclude-pattern>*.css</exclude-pattern>
    <exclude-pattern>*.html</exclude-pattern>
    <exclude-pattern>*.js</exclude-pattern>
    <exclude-pattern>*.tpl</exclude-pattern>

    <!-- Include the whole PSR-2 standard, except for selected sniff messages -->
    <rule ref="PSR2">
        <exclude name="PSR2.ControlStructures.SwitchDeclaration.TerminatingComment"/>
        <exclude name="PSR2.ControlStructures.ElseIfDeclaration"/>
    </rule>

    <!-- Promote the rule enforcing "elseif" over "else if" to an error, because this is a SHOULD recommendation. -->
    <rule ref="PSR2.ControlStructures.ElseIfDeclaration.NotAllowed">
        <type>error</type>
    </rule>

    <!-- Disallow certain functions that should not exist in a production environment -->
    <rule ref="Generic.PHP.ForbiddenFunctions">
        <properties>
            <property name="forbiddenFunctions" type="array" value="create_function=>null,die=>null,error_log=>null,eval=>null,extract=>null,ini_set=>null,is_null=>null,print_r=>null,sizeof=>count,sys_get_temp_dir=>null,var_dump=>null"/>
        </properties>
    </rule>

    <!-- Disable some namespacing sniff messages for Bootstrap.php and 'Controllers' files -->
    <rule ref="PSR1.Classes.ClassDeclaration.MissingNamespace">
        <exclude-pattern>*/Bootstrap.php</exclude-pattern>
        <exclude-pattern>*/PluginBootstrap*.php</exclude-pattern>
        <exclude-pattern>*/Controllers/*</exclude-pattern>
    </rule>
    <rule ref="Squiz.Classes.ValidClassName.NotCamelCaps">
        <exclude-pattern>*/Bootstrap.php</exclude-pattern>
        <exclude-pattern>*/PluginBootstrap*.php</exclude-pattern>
        <exclude-pattern>*/Controllers/*</exclude-pattern>
    </rule>

    <!-- Disable check for side effects in Bootstrap.php files -->
    <rule ref="PSR1.Files.SideEffects.FoundWithSymbols">
        <exclude-pattern>*/Bootstrap.php</exclude-pattern>
    </rule>

    <!-- Disable method name sniff message for test classes -->
    <rule ref="PSR1.Methods.CamelCapsMethodName.NotCamelCaps">
        <exclude-pattern>*/Test/*Test.php</exclude-pattern>
    </rule>
</ruleset>
